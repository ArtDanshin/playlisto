# Изменение логики сопоставления треков

## Проблема
Ранее треки сопоставлялись по URL, который может меняться при обновлении плейлиста, что приводило к неправильному сопоставлению треков.

## Решение
Изменена логика сопоставления на использование пары "исполнитель + название трека".

## Изменения в коде

### UpdatePlaylistDialog.tsx

#### Добавлена функция создания ключа трека:
```typescript
const createTrackKey = (track: Track): string => {
  const artist = track.artist?.toLowerCase().trim() || 'unknown artist';
  const title = track.title?.toLowerCase().trim() || 'unknown title';
  return `${artist} - ${title}`;
};
```

#### Обновлена логика сопоставления:
- Заменены Map с URL на Map с ключами треков
- Обновлены все функции фильтрации и сопоставления
- Добавлена обработка случаев с пустыми значениями

#### Изменения в функциях:
- `mergePlaylists()` - использует новые ключи для сопоставления
- `getTrackComparison()` - обновлена статистика на основе новых ключей

## Преимущества нового подхода

1. **Надежность**: Треки сопоставляются по стабильным характеристикам
2. **Гибкость**: Работает даже при изменении URL треков
3. **Точность**: Учитывает исполнителя и название, что более точно
4. **Устойчивость**: Нечувствительно к регистру и лишним пробелам

## Пример работы

### Исходный плейлист:
```
Artist 1 - Song 1 (http://old-server.com/song1.mp3)
Artist 2 - Song 2 (http://old-server.com/song2.mp3)
```

### Обновленный плейлист:
```
Artist 2 - Song 2 (http://new-server.com/song2.mp3)
Artist 3 - Song 3 (http://new-server.com/song3.mp3)
```

### Результат сопоставления:
- `Artist 2 - Song 2` будет правильно сопоставлен, несмотря на изменение URL
- `Artist 1 - Song 1` будет помечен как отсутствующий
- `Artist 3 - Song 3` будет помечен как новый

## Тестовые файлы
- `public/test-playlist-artist-title.m3u` - исходный плейлист
- `public/updated-playlist-artist-title.m3u` - обновленный плейлист с новыми URL 